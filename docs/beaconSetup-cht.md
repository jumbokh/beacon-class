當你將ZigBee換成藍牙Beacon時，實驗設計和RSSI計算距離的算法基本原理不變，但你需要調整一些細節以適應不同的技術特性。以下是一步步的實驗設計和RSSI計算距離的算法：

### 實驗設計

#### 1. 設定實驗環境
- **室外實驗**：
  - 選擇一個開放且無遮蔽物的場地，例如學校的停車場。
  - 規劃一個矩形範圍，如12米×12米，並將其細分為若干個小區塊（例如每個區塊3米×3米）。

- **室內實驗**：
  - 選擇一個具有明確邊界的室內空間，例如實驗室。
  - 規劃一個矩形範圍，如9米×5米，並將其細分為若干個小區塊（例如每個區塊3米×3米）。

#### 2. 設置參考點
- **藍牙Beacon的布置**：
  - 在矩形範圍的四個角落和中間位置放置藍牙Beacon作為參考點。
  - 確保每個Beacon的高度一致，例如1.2米，以減少高度差異對信號強度的影響。

#### 3. 收集RSSI數據
- **建立RSSI資料庫**：
  - 在實驗區域內的每個小區塊內，移動並測量每個位置的RSSI數據。
  - 將測量的RSSI數據記錄下來，並與對應的參考點位置對應。

#### 4. 設置移動點
- **移動設備設置**：
  - 使用帶有藍牙功能的移動設備（如智能手機）作為移動點，並測量不同位置的RSSI值。

### 以RSSI計算距離的算法

1. **RSSI與距離的關係公式**
   - 藍牙Beacon的RSSI與距離的關係通常由以下公式給出：
     \[
     d = 10^{\frac{(A - RSSI)}{10n}}
     \]
     其中：
     - \(d\) 為距離
     - \(A\) 為參考RSSI值（1米距離處的RSSI）
     - \(n\) 為環境因子（一般在2至4之間，取決於環境的干擾程度）

2. **距離計算步驟**
   - **測量RSSI值**：在移動點測量當前位置的RSSI值。
   - **計算距離**：使用上述公式計算移動點到每個參考點的距離。

3. **位置估算**
   - **多點測量**：在一個區域內，測量到多個參考點的RSSI值。
   - **位置三邊測量法**：使用三個或更多已知位置的參考點進行距離測量，計算其相交點，估算出移動點的具體位置。

#
![al](https://github.com/jumbokh/beacon-class/blob/main/images/alogrithm1.png)
#
### 實驗步驟總結
1. **準備實驗場地**：選擇適合的室內和室外場地，進行區域劃分。
2. **設置藍牙Beacon**：在指定位置放置Beacon，並記錄其位置。
3. **建立RSSI資料庫**：在每個小區塊內收集RSSI數據。
4. **設置移動設備**：使用智能手機測量移動點的RSSI值。
5. **計算距離**：利用RSSI值計算移動點到各參考點的距離。
6. **位置估算**：利用三邊測量法或其他算法估算移動點的位置。

這樣設計實驗並應用RSSI計算距離的方法，可以有效地將藍牙Beacon技術應用於無線位置追蹤系統中。
